1、缓存击穿：redis中没有，数据库也没有
  解决:参数进行校验，无效key也写入redis（过期时间设置小一点），布隆过滤器，设置热点缓存永不过期（另起一个线程，刷新热点key）
  加载DB的时候，防止并发
2、缓存雪崩：缓存key大面积过期，缓存失效时间分散


redis和数据库数据不一致：延时双删


二、分布式锁：
redis设置锁资源，所有线程来竞争， setNx key value，当key不存在时，就将key设置为value，并返回1，如果key存在，就返回0，
expire key locktime:设置key的有效时长，
问题：不能锁死，设置过期时长，
     加锁的线程来解锁，解锁失败，设置过期时间
     锁的内容为过期时间，如果是过期的锁，就解锁

     setnx和expire不是原子性的，所以reddssion 底层用了大量的lua脚本，保证原子性

