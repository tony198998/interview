1、Myisam：有两个文件，一个是数据文件MYD，一个是索引文件MYI


2、mysql：支持事务，支持外键，支持行级锁

脏读：读到其他事务未提交的数据
不可重复读:同一個事务当中，多次查询结果不一致
幻读：一个事务中，同样的操作查询数据，得到的记录数不相同
处理方式：加锁，事务隔离，MVCC

加锁：
脏读：修改的时候加排它锁，事务提交才释放，读取时加共享锁，读完释放锁
不可重复读：读数据时加共享锁，写数据时加排他锁
幻读：加范围锁


事务的特性：ACID


Mysql当中5种隔离级别
NONE:不使用事务
Read UNCOMMITERD: 读未提交，允许脏读
READ COMMMITED:防止脏读
repeatable read：防止脏读和不可重读，默认隔离级别
SERIALIZABLE:事务串行


锁的粒度区分：
1、全局锁：加锁之后整个数据库实例都处于只读状态，所有数据变更操作都会被挂起，一般用于全库备份的时候
共享锁：读锁， select xxx LOCK IN SHARE MODE
排它锁：写锁，只有一个事务能获得排他锁，其他事务不能获取该行的锁，INNODB 会对update、delete、insert 语句自动添加排他锁。select xxx for update；
2、行锁：加锁粒度小，加锁资源开销比较大，INNODB才支持
3、表锁:加锁粒度大，加锁资源开销比较小，Myisam和innodb都支持

间隙锁：RR隔离级别下，会加间隙锁，锁一定的范围，而不锁具体的记录，为了防止幻读
next-key：间隙锁 + 右记录锁


mysql索引结构
AVL树：树种任意节点的两个子树的高度差最大为1